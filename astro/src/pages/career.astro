---
import Layout from "../layouts/Layout.astro";
import { Icon } from "astro-icon/components";
import * as careerContent from "../content/career/career.md";

const career = careerContent.frontmatter;
console.log(career);
---

<Layout>
    <career>
        <div class="timeline">
            {
                career.map((item: any) => {
                    return (
                        <div
                            class={
                                item.present
                                    ? "career-item present"
                                    : "career-item"
                            }
                        >
                            <div
                                class={
                                    item.isPresent
                                        ? "career-card present"
                                        : "career-card"
                                }
                            >
                                <div class="career-card-row upper">
                                    <div class="logo">
                                        {item.logo ? (
                                            <Icon name={item.logo} />
                                        ) : null}
                                    </div>
                                    <div class="institution">
                                        {item.institution
                                            ? item.institution
                                            : null}
                                    </div>
                                    &emsp;
                                    <Icon name="quill--chevron-right" />
                                    &emsp;
                                    <div class="department">
                                        {item.department}
                                    </div>
                                </div>
                                <div class="career-card-row lower">
                                    <div class="role">{item.role}</div>
                                    <div class="location">{item.location}</div>
                                    <div class="dates">
                                        {item.startMonth} {item.startYear} â€”
                                        {item.isPresent ? (
                                            <span class="present">Present</span>
                                        ) : (
                                            `${item.endMonth} ${item.endYear}`
                                        )}
                                    </div>
                                </div>
                            </div>
                        </div>
                    );
                })
            }
        </div>
    </career>
</Layout>

<style>
    .timeline {
        position: relative;
        padding-left: 4px;
        border-left: 2px solid rgb(var(--accent));
        font-weight: 200;
    }
    .career-item {
        margin-top: 5px;
        margin-bottom: 5px;
        position: relative;
    }
    .career-item::before {
        content: "";
        position: absolute;
        left: -10px;
        top: 0;
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background-color: rgb(var(--accent));
    }
    .career-item.present::before {
        background-color: rgb(var(--accent-light)) !important;
    }
    .career-card {
        width: 34rem;
        margin-left: 20px;
        padding: 10px;
        line-height: 1.3rem;
        display: flex;
        flex-direction: column;
    }
    .career-card-row {
        display: flex;
        align-items: center;
        margin-top: 2px;
        margin-bottom: 2px;
    }
    .career-card.present {
        border-radius: 4px;
        border: 2px solid rgb(var(--accent-dark));
    }
    .career-card .location {
        color: rgb(var(--accent));
    }
    .career-card .dates {
        color: rgb(var(--accent));
    }
    .career-card .role {
        font-weight: initial;
    }
    .career-card .role,
    .career-card .location,
    .career-card .dates {
        flex: 1;
    }
    .career-card .logo svg {
        width: 2rem;
        height: 2rem;
        margin-right: 1rem;
    }
    span.present {
        color: rgb(var(--accent-light));
    }

    @media (max-width: 480px) {
        body {
            overflow-y: auto;
        }
        career {
            padding-top: 90rem;
            padding-bottom: 20rem;
        }
        .career-card {
            width: 100%; /* Use full width */
            margin-left: 0; /* Remove left margin */
            padding: 8px; /* Adjust padding for smaller screens */
        }

        .career-card-row.upper {
            flex-direction: column; /* Stack the content vertically */
            align-items: flex-start;
        }

        .career-card-row.lower {
            flex-direction: column; /* Stack content vertically */
            align-items: flex-start;
            margin-top: 8px;
        }

        .career-card .logo svg {
            width: 1.5rem; /* Scale down the logo size */
            height: 1.5rem;
            margin-right: 0; /* Remove right margin */
            margin-bottom: 4px; /* Add spacing below the logo */
        }

        .career-card .role,
        .career-card .location,
        .career-card .dates {
            flex: none; /* Remove flex behavior */
            margin-bottom: 4px; /* Add spacing between lines */
        }
    }
</style>
